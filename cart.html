<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Shop</title>
    <script src="https://kit.fontawesome.com/cb6bb63253.js" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.4/css/all.css" />
    <link rel="stylesheet" href="styles.css">
</head>

<body>
    
    <section id="header">
        <a href="#top"><img src="images\slippers-gc50344fc2_640.png" class="logo" alt="logo" style="height: 80px; width: 51,25px;"></a>        
        <div>
            <ul id="navbar">
                <li><a href="index.html">Home</a></li>
                <li><a href="shop.html">Shop</a></li>
                <li><a href="about.html">About</a></li>
                <li><a href="contact.html">Contact</a></li>
                <li><a class="active" id="mobile-nav-cart" href="cart.html"><i class="fa fa-cart-shopping"></i></a></li>
                <a href="#" id="close"><i class="fa fa-times"></i></a>
            </ul>
        </div>
        <div id="mobile">
            <a href="cart.html"><i class="fa fa-cart-shopping"></i></a>
            <i id="bar" class="fas fa-outdent"></i>
            
        </div>
    </section>
    
    
    <section id="cart-header" class="about-header">
        <h2>Your Items</h2>
        <p>Thanks for shopping with us!</p>
    </section>
    
    <div id="cart-container" class="section-p1"></div>

    <!--Gradient border around total price-->
    <div class="total-price-border">
        <div class="gradient-border orange-gradient-border">
            <h4 id="total-price"></h4>
        </div>
    </div>
    

    
    <script>
        // Update the quantity of an item in the cart
function updateQuantity(id, qty) {
  let item = cart.find(item => item.id === id);
  if (item) {
    item.quantity = qty;
    saveCart();
    displayCart();
  }
}

// Remove an item from the cart
function removeItem(id) {
  let itemIndex = cart.findIndex(item => item.id === id);
  if (itemIndex !== -1) {
    cart.splice(itemIndex, 1);
    saveCart();
    displayCart();
  }
}

// Display the cart in the cart.html file
function displayCart() {
  let cartContainer = document.getElementById("cart-container");
  cartContainer.innerHTML = "";

  cart.forEach(item => {
    let itemElement = document.createElement("div");
    itemElement.classList.add("cart-item");

    let itemImage = document.createElement("img");
    itemImage.src = item.image;
    itemImage.alt = item.name;
    itemElement.appendChild(itemImage);

    let itemDescription = document.createElement("p");
    itemDescription.textContent = item.description;
    itemDescription.classList.add("cart-item-description")
    itemElement.appendChild(itemDescription);

    let itemInfo = document.createElement("div");
    itemInfo.classList.add("item-info");
    itemElement.appendChild(itemInfo);

    let itemName = document.createElement("h5");
    itemName.textContent = item.name;
    itemInfo.appendChild(itemName);

   
    //Set the item price depending on the quantity, rounded to 2 decimals using js
    let itemPrice = document.createElement("p");
    let notRounded = item.price * item.quantity;
    rounded = notRounded.toFixed(2);
    itemPrice.textContent = `Price: ${rounded} kr`;
    itemInfo.appendChild(itemPrice);




    let itemQuantity = document.createElement("input");
    itemQuantity.type = "number";
    itemQuantity.min = "1";
    itemQuantity.value = item.quantity;
    itemQuantity.addEventListener("change", function() {
      updateQuantity(item.id, this.value);
    });
    itemInfo.appendChild(itemQuantity);

    let removeBtn = document.createElement("button");
    removeBtn.classList.add("button-normal")
    removeBtn.textContent = "Remove";
    removeBtn.addEventListener("click", function() {
      removeItem(item.id);
    });
    itemInfo.appendChild(removeBtn);

    cartContainer.appendChild(itemElement);
  });

  let totalPrice = document.getElementById("total-price");
  totalPrice.textContent = `Total: ${calculateTotalPrice()} kr`;
}

// Calculate the total price of all items in the cart
function calculateTotalPrice() {
  return cart.reduce((total, item) => total + item.price * item.quantity, 0).toFixed(2);
}

// Save the cart to local storage
function saveCart() {
  localStorage.setItem("cart", JSON.stringify(cart));
}

// Load the cart from local storage
function loadCart() {
  let savedCart = localStorage.getItem("cart");
  if (savedCart) {
    cart = JSON.parse(savedCart);
  }
}

// Initialize the cart
let cart = [];
loadCart();
displayCart();
    </script>
    <script src="script.js"></script>
</body>
</html>